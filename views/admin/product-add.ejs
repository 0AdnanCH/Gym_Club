<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->

<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Create Product | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
     

     <!-- Theme Config js (Require in all Page) -->
     <script src="assets/js/config.js"></script>
     <style>
          .choices__list--dropdown {
               max-height: 300px; 
               transform-origin: top;
          }
          .error-message {
               display: none;
          }
          .select-img {
               background: transparent;
               padding: 10px 15px;
               border-radius: 10px;
               font-weight: bold;
               color: gray;
               text-transform: uppercase;
               cursor: pointer;
               font-family: Avenir, Helvetica, Arial, sans-serif;
               font-size: 11px;
               transition: box-shadow ease 0.25s;
               border: 1px solid gray;

          }

          .select-img:hover {
               background-color: #5D7186;
               border: none;
               color: white;
          }

          .productImages {
               width: 0;
               height: 0;
               margin: 0;
               padding: 0;
          }

         

          .short-swal-popup {
               width: 300px; 
               padding: 0;
               font-size: 15px;
          }

          .short-swal-content {
               font-size: 15px;
               margin: 0; 
               padding: 0; 
          }

          .swal2-actions {
               gap: 5px; 
          }

          .swal2-icon.swal2-error {
               display: flex;
               align-items: center;
               justify-content: center;
               width: 30px; 
               height: 30px;
               margin: 0; 
               font-size: 15px;
               line-height: 30px; 
          }

          .swal2-icon.swal2-error::before {
               content: '✖'; 
               color: red;
          }

          .swal2-icon.swal2-success {
               display: flex;
               align-items: center;
               justify-content: center;
               width: 30px !important; /* Smaller icon width */
               height: 30px !important; /* Smaller icon height */
               margin: 0 !important; /* Remove default margins */
               font-size: 16px !important; /* Adjust font size for symbol */
               line-height: 30px; /* Vertically align the icon */
          }

          .swal2-icon.swal2-success::before {
               content: '✔'; /* Use a simple checkmark for the success icon */
               color: green;
          }

          .compact-swal-popup {
               width: auto !important; 
               height: auto !important; 
               padding: 20px 20px !important;
               display: flex;
               align-items: center;
               justify-content: center;
               border-radius: 8px;
          }
          .swal2-title {
               font-size: 18px !important;
               margin: 0 !important;
               line-height: 1.5 !important;
          }


          .swal2-html-container {
               margin: 0 !important; 
          }

          .swal2-timer-progress-bar {
               height: 2px !important;
          }
     </style>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken"
                                             class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Create Product</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                   <button type="button" class="topbar-button" id="light-dark-mode">
                                        <iconify-icon icon="solar:moon-bold-duotone"
                                             class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn"
                                        data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas"
                                        aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:settings-bold-duotone"
                                             class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   <a type="button" class="topbar-button" id="page-header-user-dropdown"
                                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="d-flex align-items-center">
                                             <img class="rounded-circle" width="32"
                                                  src="assets/images/users/avatar-1.jpg" alt="avatar-3">
                                        </span>
                                   </a>
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="#">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span
                                                  class="align-middle">Profile</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <button class="dropdown-item text-danger" id="logout-btn">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                        </button>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
          </header>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas"
                              aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme"
                                                  id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme"
                                                  id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color"
                                                  id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color"
                                                  id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color"
                                                  id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color"
                                                  id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size"
                                                  id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size"
                                                  id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size"
                                                  id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size"
                                                  id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size"
                                                  id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          <div class="main-nav">
               <!-- Sidebar Logo -->
               <div class="logo-box">
                    <a href="/admin" class="logo-dark">
                         <img src="assets/images/logo-sm.png" class="logo-sm" alt="logo sm">
                         <img src="assets/images/logo-dark.png" class="logo-lg" alt="logo dark">
                    </a>

                    <a href="/admin" class="logo-light">
                         <img src="assets/images/logo-sm.png" class="logo-sm" alt="logo sm">
                         <img src="assets/images/logo-light.png" class="logo-lg" alt="logo light">
                    </a>
               </div>

               <!-- Menu Toggle Button (sm-hover) -->
               <button type="button" class="button-sm-hover" aria-label="Show Full Sidebar">
                    <iconify-icon icon="solar:double-alt-arrow-right-bold-duotone"
                         class="button-sm-hover-icon"></iconify-icon>
               </button>

               <div class="scrollbar" data-simplebar>
                    <ul class="navbar-nav" id="navbar-nav">

                         <li class="menu-title">General</li>

                         <li class="nav-item">
                              <a class="nav-link" href="/admin">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:widget-5-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Dashboard </span>
                              </a>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link" href="/admin/salesReport">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:widget-5-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Sales Report </span>
                              </a>
                         </li>
                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarProducts" data-bs-toggle="collapse"
                                   role="button" aria-expanded="false" aria-controls="sidebarProducts">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:t-shirt-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Products </span>
                              </a>
                              <div class="collapse" id="sidebarProducts">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/products">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addProducts">Create</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCategory" data-bs-toggle="collapse"
                                   role="button" aria-expanded="false" aria-controls="sidebarCategory">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:clipboard-list-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Category </span>
                              </a>
                              <div class="collapse" id="sidebarCategory">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/category">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addCategory">Create</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarOrders" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarOrders">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:bag-smile-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Orders </span>
                              </a>
                              <div class="collapse" id="sidebarOrders">
                                   <ul class="nav sub-navbar-nav">

                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/order">List</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="menu-title mt-2">Users</li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCustomers" data-bs-toggle="collapse"
                                   role="button" aria-expanded="false" aria-controls="sidebarCustomers">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:users-group-two-rounded-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Customers </span>
                              </a>
                              <div class="collapse" id="sidebarCustomers">
                                   <ul class="nav sub-navbar-nav">

                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/users">List</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="menu-title mt-2">Other</li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCoupons" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarCoupons">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:leaf-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Coupons </span>
                              </a>
                              <div class="collapse" id="sidebarCoupons">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/coupon">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addCoupon">Add</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarOffers" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarOffers">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:leaf-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Offers </span>
                              </a>
                              <div class="collapse" id="sidebarOffers">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/offers">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addOffer">Add</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>
                    </ul>
               </div>
          </div>
          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-xxl">

                    <div class="row">
                         <div class="col-xl col-lg ">
                              <div class="card">
                                   <div class="card-header d-flex justify-content-between align-items-center gap-1">
                                        <h4 class="card-title flex-grow-1">General Information</h4>
                                        <a href="/admin/products" class="btn btn-sm btn-primary">
                                             All Products
                                        </a>
                                   </div>
                                   <form id="product-form" enctype="multipart/form-data">
                                        <div class="card-body">
                                             <div class="row">
                                                  <div class="col-lg-6">
                                                       <div class="mb-3">
                                                            <label for="product-name" class="form-label">Product
                                                                 Name</label>
                                                            <input type="text" id="product-name" name="productName"
                                                                 class="form-control" placeholder="Items Name">
                                                            <p id="name-error" class="text-danger error-message mt-2"></p>
                                                       </div>
                                                  </div>
                                                  <div class="col-lg-6">
                                                       <label for="product-categories" class="form-label">Product
                                                            Categories</label>
                                                       <select class="form-control" id="product-categories" data-choices
                                                            data-choices-groups data-placeholder="Select Categories"
                                                            name="category">
                                                            <% for(let i=0; i<cat.length; i++) { %>
                                                                 <option value="<%= cat[i].name %>">
                                                                      <%= cat[i].name %>
                                                                 </option>
                                                                 <% } %>
                                                       </select>
                                                       <p id="category-error" class="error-message text-danger mt-2"></p>
                                                  </div>
                                             </div>
                                             <div>
                                                  <div class="row mb-4">
                                                       <div class="col-lg-12">
                                                            <div class="mt-3">
                                                                 <div class="d-flex justify-content-between align-items-center">
                                                                      <h4 class="text-dark fw-medium">Variants 1:</h4>
                                                                      <button class="btn btn-primary" type="button"
                                                                           id="variant-add">Add More</button>
                                                                 </div>

                                                                  <div id="variant-add-cont">
                                                                      <p id="variant-error" class="error-message text-danger mt-1 mb-0"></p>
                                                                      <div>
                                                                      
                                                                           <div id="variants-cont">
                                                                                
                                                                                <div class="form-group row mt-2">
                                                                                     <label class="form-label col-sm-1 col-form-label"
                                                                                          for="color0">Color picker:</label>
                                                                                     <div class="col-sm-4">
                                                                                          <input type="color" name="productColor"
                                                                                               class="form-control form-control-color productColor"
                                                                                               id="color0">
                                                                                     </div>
                                                                                <!-- color only -->             
                                      
                                                                                </div>
                                                                                <!-- size only div -->
                                                                                <div class="d-flex flex-wrap gap-1">
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="XS0">XS:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeXS"
                                                                                                    id="XS0">
                                                                                               <input type="hidden" id="hidden-XS0" name="sizeXS">
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="S0">S:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeS"
                                                                                                    id="S0">
                                                                                               <input type="hidden" id="hidden-S0" name="sizeS">     
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="M0">M:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeM"
                                                                                                    id="M0">
                                                                                               <input type="hidden" id="hidden-M0" name="sizeM">
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="L0">L:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeL"
                                                                                                    id="L0">
                                                                                               <input type="hidden" id="hidden-L0" name="sizeL">
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="XL0">XL:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeXL"
                                                                                                    id="XL0">
                                                                                               <input type="hidden" id="hidden-XL0" name="sizeXL">
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="XXL0">XXL:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSizeXXL"
                                                                                                    id="XXL0">
                                                                                               <input type="hidden" id="hidden-XXL0" name="sizeXXL">
                                                                                          </div>
                                                                                     </div>
                                                                                     <div class="form-group row mt-2">
                                                                                          <label
                                                                                               class="col-sm-3 col-form-label form-label"
                                                                                               for="3XL0">3XL:</label>
                                                                                          <div class="col-sm-5">
                                                                                               <input type="number"
                                                                                                    class="form-control productSize3XL"
                                                                                                    id="3XL0">
                                                                                               <input type="hidden" id="hidden-3XL0" name="size3XL">
                                                                                          </div>
                                                                                     </div>
                                                                                <!-- size only div -->     
                                                                                </div>
                                                                           <!-- color and size,error combine div -->
                                                                           </div>
                                                                           <!-- all image div -->
                                   <div class="row mt-3">
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image1-0" id="file1-upload0"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image1-0" name="images"
                                                       class="form-control productImages"
                                                       onclick="clearImg(event, 1, 0)"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onchange="viewImage(event, 1, 0)">
                                                  <div>
                                                       <img id="img1View0" style="max-height: 500px;">
                                                  </div>
                                             </div>
                                             <button type="button" id="crop1-save0"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview1-cont0" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file1-preview0"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image2-0" id="file2-upload0"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image2-0" name="images"
                                                       class="form-control productImages"
                                                       onclick="clearImg(event, 2, 0)"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onchange="viewImage(event, 2, 0)">
                                                  <div>
                                                       <img id="img2View0" style="max-height: 500px;">
                                                  </div>
                                                  
                                             </div>
                                             <button type="button" id="crop2-save0"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview2-cont0" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file2-preview0"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image3-0" id="file3-upload0"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image3-0" name="images"
                                                       class="form-control productImages"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onchange="viewImage(event, 3, 0)"
                                                       onclick="clearImg(event, 3, 0)">
                                                  <div>
                                                       <img id="img3View0" style="max-height: 500px;"> 
                                                  </div>
                                             </div>
                                             <button type="button" id="crop3-save0"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview3-cont0" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file3-preview0"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>
                                   <!-- all image div -->     
                                   </div> 
                                                                      <!-- color and size ------- image div -->
                                                                      </div>
                                                                  <!-- add more div and existing div -->    
                                                                  </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                             </div>
                                             <div class="row">
                                                  <div class="col-lg-12">
                                                       <div class="mb-3">
                                                            <label for="description"
                                                                 class="form-label">Description</label>
                                                            <textarea class="form-control bg-light-subtle"
                                                                 id="description" name="description" rows="7"
                                                                 placeholder="Short description about the product"></textarea>
                                                            <p id="description-error" class="text-danger error-message mt-2"></p>
                                                       </div>
                                                  </div>
                                             </div>
                                             <div class="row">
                                                  <div class="col-lg-4">
                                                       <div class="mb-3">
                                                            <label for="product-id" class="form-label">Regular
                                                                 Price</label>
                                                            <input type="number" id="regular-price" name="regularPrice"
                                                                 class="form-control" placeholder="$">
                                                            <p id="price-error" class="text-danger error-message mt-2"></p>
                                                       </div>
                                                  </div>
                                                  <div class="col-lg-4">
                                                       <div class="mb-3">
                                                            <label for="product-id" class="form-label">Sale
                                                                 Price</label>
                                                            <input type="number" id="sale-price" name="salePrice"
                                                                 class="form-control" placeholder="$">
                                                            <p id="salePrice-error" class="text-danger error-message mt-2"></p>
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>
                                   </form>
                              </div>
                              <div class="p-3 bg-light mb-3 rounded">
                                   <div class="row justify-content-end g-2">
                                        <div class="col-lg-2">
                                             <button type="button" id="submit-btn" class="btn btn-outline-secondary w-100">Create Product</button>
                                        </div>
                                        <div class="col-lg-2">
                                             <button type="button" id="cancel-btn" class="btn btn-primary w-100">Cancel</button>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
               <footer class="footer">
                    <div class="container-fluid">
                         <div class="row">
                              <div class="col-12 text-center">
                                   <script>document.write(new Date().getFullYear())</script> &copy; Larkon. Crafted by
                                   <iconify-icon icon="iconamoon:heart-duotone"
                                        class="fs-18 align-middle text-danger"></iconify-icon> <a
                                        href="https://1.envato.market/techzaa" class="fw-bold footer-text"
                                        target="_blank">Techzaa</a>
                              </div>
                         </div>
                    </div>
               </footer>
               <!-- ========== Footer End ========== -->

          </div>
          <!-- ==================================================== -->
          <!-- End Page Content -->
          <!-- ==================================================== -->


     </div>
     <!-- END Wrapper -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css">
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <!-- Vendor Javascript (Require in all Page) -->
     <script src="assets/js/vendor.js"></script>

     <!-- App Javascript (Require in all Page) -->
     <script src="assets/js/app.js"></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>
     <script>

          function validateForm(event) {
               clearErrorMessage();

               const name = document.getElementById('product-name').value;
               const description = document.getElementById('description').value;
               const category = document.getElementById('product-categories').value;
               const price = document.getElementById('regular-price').value;
               const salePrice = document.getElementById('sale-price').value;
               
               let isValid = true;
               if (name.trim() === "") {
                    isValid = false;
                    showError('name-error', 'Please enter a product name.');
               } else if (!/^[a-zA-Z\s]+$/.test(name.trim())) {
                    isValid = false;
                    showError('name-error', 'Product name should contain only alphabetic characters.');
               }
               if (description.trim() === "") {
                    isValid = false;
                    showError('description-error', 'Please enter a product description.');
               } else if (!/^[a-zA-Z\s]+$/.test(description.trim())) {
                    isValid = false;
                    showError('description-error', 'Product description should contain only alphabetic characters.');
               }
               if (category.trim() === "") {
                    isValid = false;
                    showError('category-error', 'please select a category.');
                }
               if (!/^\d+(\.\d{1,2})?$/.test(price) || parseFloat(price) < 0) {
                    isValid = false;
                    showError('price-error', 'Please enter a valid non-negative price.');
               } else if (parseFloat(price) <= parseFloat(salePrice)) {
                    isValid = false;
                    showError('salePrice-error', 'Regular price must be greater than sale price.');
               }
               if (!/^\d+(\.\d{1,2})?$/.test(salePrice) || parseFloat(salePrice) < 0) {
                    isValid = false;
                    showError('salePrice-error', 'Please enter a valid non-negative price.');
               }
               if (!variantValidation()) {
                    isValid = false;
               }
         

               if(isValid){
                    variantCoding();
               }
               return isValid;
          }

          function variantValidation() {

               const color = document.querySelectorAll('.productColor');
               const sizeXS = document.querySelectorAll('.productSizeXS');
               const sizeS = document.querySelectorAll('.productSizeS');
               const sizeM = document.querySelectorAll('.productSizeM');
               const sizeL = document.querySelectorAll('.productSizeL');
               const sizeXL = document.querySelectorAll('.productSizeXL');
               const sizeXXL = document.querySelectorAll('.productSizeXXL');
               const size3XL = document.querySelectorAll('.productSize3XL');
               const images = document.getElementsByName('images');
               
               let checkClr = [];
               let isChecked = true;
               const digitReg = /^\d+$/;
               for(let i = 0; i<color.length; i++) {
                    if(!color[i].value) {
                         isChecked = false;
                         showError('variant-error', 'color is required.');
                         return;
                    } else if(checkClr.includes(color[i].value)) {
                         showError('variant-error', 'Cannot apply same color for different item.');
                         isChecked = false;
                         return;
                    } else {
                         checkClr.push(color[i].value);
                    }
                    if(!digitReg.test(sizeXS[i].value) || sizeXS[i].value<0 || !/^\d+$/.test(sizeS[i].value) || sizeS[i].value<0 || !/^\d+$/.test(sizeM[i].value) || sizeM[i].value<0 || !/^\d+$/.test(sizeL[i].value) || sizeL[i].value<0 || !/^\d+$/.test(sizeXL[i].value) || sizeXL[i].value<0 || !/^\d+$/.test(sizeXXL[i].value) || sizeXXL[i].value<0 || !/^\d+$/.test(size3XL[i].value) || size3XL[i].value<0 ) {
                         showError('variant-error', 'All size quantity required and it should be non negative.');
                         isChecked = false;
                         return;
                    }
               }  
               for(let i = 0; i< images.length; i++) {
                    if(images[i].files.length === 0) {
                         showError('variant-error', 'All images required.');
                         isChecked = false;
                         return;
                    } else if(images[i].files[0].size>(2*1024*1024)) {
                         isValid = false;
                         showError('variant-error', `image ${i+1} file size too large, Please choose an image smaller than 2 MB.`);
                         return;
                    }
               }
               
               return isChecked
          }

          function clearImg(event , index1, index2) {

               const imgView = document.getElementById(`img${index1}View${index2}`);
               if(imgView.cropper) {
                    imgView.cropper.destroy();
                    // let saveButton = document.querySelector(`#crop${index1}-save${index2}`);
                    // saveButton.removeEventListener('click', saveCropped);

                    imgView.parentNode.innerHTML = `<img id="img${index1}View${index2}" src="" style="max-height: 500px;"/>`;
                    document.getElementById(`file${index1}-preview${index2}`).src = '';
               }
          }


          function viewImage(event, index1, index2) {
               if(!event.target.files[0]) {
                    return;
               }
               if(!validateImage(event.target.files[0])) {
                    return;
               }
               document.getElementById(`img${index1}View${index2}`).src = URL.createObjectURL(event.target.files[0]);
               imgHandler(event, index1, index2);
          }

          function imgHandler(event, index1, index2) {
               let input = event.target;
               let reader = new FileReader();
               reader.onload = function () {
                    let dataURL = reader.result;
                    let image = document.getElementById(`img${index1}View${index2}`);
                    image.src = dataURL;
                    // Create the cropper instance
                    let cropper = new Cropper(image, {
                         aspectRatio: 1,
                         viewMode: 1,
                         guides: true,
                         background: false,
                         autoCropArea: 1,
                         zoomable: true
                    });
                    // Attach event listener to save button
                    let saveButton = document.getElementById(`crop${index1}-save${index2}`);
                    if(saveButton._listener) {
                         saveButton.removeEventListener('click', saveButton._listener);
                    }
                    saveButton.addEventListener('click', async function saveCropped() {
                         saveButton._listener = saveCropped;
                         let croppedCanvas = cropper.getCroppedCanvas();
                         let croppedImage = document.getElementById(`file${index1}-preview${index2}`);
                         croppedImage.src = croppedCanvas.toDataURL('image/jpeg', 1.0);
                         let timestamp = new Date().getTime();
                         let color = document.getElementById('color'+index2).value;
                         let extractClr = color.slice(1);
                         let fileName = `cropped-img-${timestamp}-${extractClr}-${index1-1}.png`;
                         
                         // Convert cropped canvas to Blob and update the input file
                         await croppedCanvas.toBlob(blob => {
                              let input = document.getElementById(`image${index1}-${index2}`);
                              let imgFile = new File([blob], fileName, blob);
                              const fileList = new DataTransfer();
                              fileList.items.add(imgFile);
                              input.files = fileList.files;
                         });
                    });
               };
               reader.readAsDataURL(input.files[0]);
          }
          
          function validateImage(file) {
               if(!file) {
                    return false;
               }
               const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
               if(!allowedTypes.includes(file.type)) {
                    return false;
               }
               const maxSize = 2 * 1024 * 1024;
               if(file.size > maxSize) {
                    return false;
               }
               return true;
          }

          const btn = document.getElementById('variant-add')
          btn.addEventListener("click", addVariants);
          let index = 1
          function addVariants() {
               const variantCont = document.getElementById('variant-add-cont')
               const newDiv = document.createElement('div')
               newDiv.innerHTML = `<!-- color and size combine div -->
                                   <h4 class="text-dark fw-medium mt-5">Variants ${index+1}:</h4>
                                   <div id="variants-cont${index}">
                                        <!-- color only -->
                                        <div class="d-flex justify-content-between align-items-center">
                                             <div class="form-group row mt-2" style="width: 100%;">
                                                  <label
                                                  class="form-label col-sm-1 col-form-label"
                                                  for="color${index}">Color picker:</label>
                                                  <div class="col-sm-4">
                                                       <input type="color" name="productColor" class="form-control form-control-color productColor" id="color${index}">
                                                  </div>
                                             </div>
                                             <button type="button" class="btn-close" id="close-btn${index}"></button>   
                                        </div>
                                        <!-- size only div -->
                                        <div class="d-flex flex-wrap gap-1" >
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="XS${index}">XS:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeXS" id="XS${index}">
                                                       <input type="hidden" id="hidden-XS${index}" name="sizeXS">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="S${index}">S:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeS" id="S${index}">
                                                       <input type="hidden" id="hidden-S${index}" name="sizeS">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="M${index}">M:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeM" id="M${index}">
                                                       <input type="hidden" id="hidden-M${index}" name="sizeM">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="L${index}">L:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeL" id="L${index}">
                                                       <input type="hidden" id="hidden-L${index}" name="sizeL">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="XL${index}">XL:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeXL" id="XL${index}">
                                                       <input type="hidden" id="hidden-XL${index}" name="sizeXL">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="XXL${index}">XXL:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSizeXXL" id="XXL${index}">
                                                       <input type="hidden" id="hidden-XXL${index}" name="sizeXXL">
                                                  </div>
                                             </div>
                                             <div class="form-group row mt-2">
                                                  <label
                                                  class="col-sm-3 col-form-label form-label"
                                                  for="3XL${index}">3XL:</label>
                                                  <div class="col-sm-5">
                                                       <input type="number" class="form-control productSize3XL" id="3XL${index}">
                                                       <input type="hidden" id="hidden-3XL${index}" name="size3XL">
                                                  </div>
                                             </div>     
                                        </div>
                                   </div>
                                   <!-- all image add container div -->
                                   <div class="row mt-3">
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image1-${index}" id="file1-upload${index}"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image1-${index}" name="images"
                                                       class="form-control productImages"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onclick="clearImg(event, 1, ${index})"
                                                       onchange="viewImage(event, 1, ${index})">
                                                  <div>
                                                        <img id="img1View${index}" style="max-height: 500px;">
                                                  </div>
                                             </div>
                                             <button type="button" id="crop1-save${index}"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview1-cont${index}" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file1-preview${index}"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image2-${index}" id="file2-upload${index}"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image2-${index}" name="images"
                                                       class="form-control productImages"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onclick="clearImg(event, 2, ${index})"
                                                       onchange="viewImage(event, 2, ${index})">
                                                  <div>
                                                        <img id="img2View${index}" style="max-height: 500px;">
                                                  </div>
                                             </div>
                                             <button type="button" id="crop2-save${index}"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview2-cont${index}" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file2-preview${index}"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>
                                        <div class="col-lg-4">
                                             <div class="mb-3">
                                                  <label for="image3-${index}" id="file3-upload${index}"
                                                       class="form-label select-img">Select an Image</label>
                                                  <input type="file" id="image3-${index}" name="images"
                                                       class="form-control productImages"
                                                       accept="image/png, image/jpeg, image/jpg"
                                                       onclick="clearImg(event, 3, ${index})"
                                                       onchange="viewImage(event, 3, ${index})">
                                                  <div>
                                                        <img id="img3View${index}" style="max-height: 500px;">
                                                  </div>
                                             </div>
                                             <button type="button" id="crop3-save${index}"
                                                  class="btn btn-outline-secondary mb-2">save</button>
                                             <div id="preview3-cont${index}" class="image-cropper img-thumbnail"
                                                  style="width: 100%; height: 250px; overflow: hidden;">
                                                  <img id="file3-preview${index}"
                                                       style="max-width: 100%; height: auto;">
                                             </div>
                                        </div>    
                                   </div>`
               variantCont.appendChild(newDiv);
               const closeButton = document.getElementById(`close-btn${index}`);
               closeButton.addEventListener('click', () => {
                    newDiv.remove();
               });
               index++;
          }
          function variantCoding() {
               if(variantValidation()) {
                    for(let i = 0; i<index; i++) {
                         const color = document.getElementById(`color${i}`).value;
                         const sizeXS = document.getElementById(`XS${i}`);
                         const sizeS = document.getElementById(`S${i}`);
                         const sizeM = document.getElementById(`M${i}`);
                         const sizeL = document.getElementById(`L${i}`);
                         const sizeXL = document.getElementById(`XL${i}`);
                         const sizeXXL = document.getElementById(`XXL${i}`);
                         const size3XL = document.getElementById(`3XL${i}`);

                         const hiddenXS = document.getElementById(`hidden-XS${i}`);
                         const hiddenS = document.getElementById(`hidden-S${i}`);
                         const hiddenM = document.getElementById(`hidden-M${i}`);
                         const hiddenL = document.getElementById(`hidden-L${i}`);
                         const hiddenXL = document.getElementById(`hidden-XL${i}`);
                         const hiddenXXL = document.getElementById(`hidden-XXL${i}`);
                         const hidden3XL = document.getElementById(`hidden-3XL${i}`);

                         if(!hiddenXS.value.includes(color)) {
                              hiddenXS.value = `${sizeXS.value}${color}`
                         }
                         if(!hiddenS.value.includes(color)) {
                              hiddenS.value = `${sizeS.value}${color}`
                         }
                         if(!hiddenM.value.includes(color)) {
                              hiddenM.value = `${sizeM.value}${color}`
                         }
                         if(!hiddenL.value.includes(color)) {
                              hiddenL.value = `${sizeL.value}${color}`
                         }
                         if(!hiddenXL.value.includes(color)) {
                              hiddenXL.value = `${sizeXL.value}${color}`
                         }
                         if(!hiddenXXL.value.includes(color)) {
                              hiddenXXL.value = `${sizeXXL.value}${color}`
                         }
                         if(!hidden3XL.value.includes(color)) {
                              hidden3XL.value = `${size3XL.value}${color}`
                         }
                    }
               }
          }

          document.getElementById('cancel-btn').addEventListener('click', () => {
               window.location.reload();
          })

          function clearErrorMessage() {
               document.querySelectorAll('.error-message').forEach(element => element.style.display = 'none');
          }
          function showError(elementId, message) {

               document.getElementById(elementId).style.display = 'block';
               document.getElementById(elementId).textContent = message;
          }

          async function validateAndSubmit(event) {
               event.preventDefault();
               try {
                    if(!validateForm()) {
                         return;
                    }
                    const productForm = document.getElementById('product-form');
                    const formData = new FormData(productForm);
                    const response = await fetch('/admin/addProducts', {
                         method:'POST',
                         body: formData
                    });
                    const data = await response.json();
                    if (!response.ok) {
                         throw new Error(data.message);
                    }
                    if(data.success) {
                         Swal.fire({
                              position: "top-end",
                              html: `
                                   <div style="display: flex; align-items: center; gap: 10px;">
                                        <div>
                                             <div class="swal2-icon swal2-success" style="width: 30px; height: 30px; margin: 0; font-size: 16px;"></div>
                                        </div>
                                        <div style="font-size: 20px; text-align: left;">Added successfully!</div>
                                   </div>
                              `,
                              showConfirmButton: false,
                              timer: 1500,
                              customClass: {
                                   popup: 'compact-swal-popup',
                              }
                         })
                         .then(() => {
                              window.location.href = '/admin/products';
                         });
                    } 
               } catch (error) {
                    Swal.fire({
                         position: "top-end",
                         html: `
                              <div style="display: flex; align-items: center; gap: 10px;">
                                   <div>
                                        <div class="swal2-icon swal2-error" style="width: 30px; height: 30px; margin: 0; font-size: 16px;"></div>
                                   </div>
                                   <div style="font-size: 20px; text-align: left;">Oops... ${error.message}</div>
                              </div>
                         `,
                         showConfirmButton: false,
                         timer: 1500,
                         customClass: {
                              popup: 'compact-swal-popup',
                         }
                    });
               } 
          }
          document.getElementById('submit-btn').addEventListener('click', validateAndSubmit);

     async function logout() {
          try {
               const response = await fetch('/admin/logout', {method: 'POST'})
               const data = await response.json();
               if(!response.ok) {
                    throw new Error(data.message);
               }
               if(data.success) {
                    window.location.href = '/admin/login'
               }
          } catch (error) {
               Swal.fire({
                    position: "top-end",
                    icon: "error",
                    title: "Oops...",
                    text: error.message,
                    showConfirmButton: false,
                    timer: 1500,
                    customClass: {
                         popup: 'custom-swal-popup'
                    }
               });
          }
     }

     document.getElementById('logout-btn').addEventListener('click', logout);

     </script>

</body>


<!-- Mirrored from techzaa.in/larkon/admin/product-add.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->

</html>