<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/coupons-list.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:31 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Coupons | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />

     <!-- Theme Config js (Require in all Page) -->
     <script src="assets/js/config.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <style>
     .display-none {
          display: none;
     }
     .short-swal-popup {
          width: 300px; 
          padding: 0;
          font-size: 15px;
     }

     .short-swal-content {
          font-size: 15px;
          margin: 0; 
          padding: 0; 
     }

     .short-swal-confirm-btn {
          padding: 5px 10px;
          font-size: 15px;
          border-radius: 4px;
     }

     .short-swal-cancel-btn {
          padding: 5px 10px;
          font-size: 15px;
          border-radius: 4px;
     }

     
     .swal2-actions {
          gap: 5px; 
     }

     .swal2-icon.swal2-error {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 30px; 
          height: 30px;
          margin: 0; 
          font-size: 15px;
          line-height: 30px; 
     }

     .swal2-icon.swal2-error::before {
          content: 'âœ–'; 
          color: red;
     }

     .compact-swal-popup {
          width: auto !important; 
          height: auto !important; 
          padding: 20px 20px !important;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 8px;
     }
     .swal2-title {
          font-size: 18px !important;
          margin: 0 !important;
          line-height: 1.5 !important;
     }


     .swal2-html-container {
          margin: 0 !important; 
     }

     .swal2-timer-progress-bar {
      height: 2px !important;
     }
     </style>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Coupons</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                   <button type="button" class="topbar-button" id="light-dark-mode">
                                        <iconify-icon icon="solar:moon-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:settings-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   <a type="button" class="topbar-button" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="d-flex align-items-center">
                                             <img class="rounded-circle" width="32" src="assets/images/users/avatar-1.jpg" alt="avatar-3">
                                        </span>
                                   </a>
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="pages-profile.html">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <button class="dropdown-item text-danger" id="logout-btn">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                        </button>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
          </header>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          <div class="main-nav">
               <!-- Sidebar Logo -->
               <div class="logo-box">
                    <a href="/admin" class="logo-dark">
                         <img src="assets/images/logo-sm.png" class="logo-sm" alt="logo sm">
                         <img src="assets/images/logo-dark.png" class="logo-lg" alt="logo dark">
                    </a>

                    <a href="/admin" class="logo-light">
                         <img src="assets/images/logo-sm.png" class="logo-sm" alt="logo sm">
                         <img src="assets/images/logo-light.png" class="logo-lg" alt="logo light">
                    </a>
               </div>

               <!-- Menu Toggle Button (sm-hover) -->
               <button type="button" class="button-sm-hover" aria-label="Show Full Sidebar">
                    <iconify-icon icon="solar:double-alt-arrow-right-bold-duotone" class="button-sm-hover-icon"></iconify-icon>
               </button>

               <div class="scrollbar" data-simplebar>
                    <ul class="navbar-nav" id="navbar-nav">

                         <li class="menu-title">General</li>

                         <li class="nav-item">
                              <a class="nav-link" href="/admin">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:widget-5-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Dashboard </span>
                              </a>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarProducts" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarProducts">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:t-shirt-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Products </span>
                              </a>
                              <div class="collapse" id="sidebarProducts">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/products">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addProducts">Create</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link" href="/admin/salesReport">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:widget-5-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Sales Report </span>
                              </a>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCategory" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarCategory">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:clipboard-list-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Category </span>
                              </a>
                              <div class="collapse" id="sidebarCategory">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/category">List</a>
                                        </li>                         
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addCategory">Create</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarOrders" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarOrders">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:bag-smile-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Orders </span>
                              </a>
                              <div class="collapse" id="sidebarOrders">
                                   <ul class="nav sub-navbar-nav">

                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/order">List</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="menu-title mt-2">Users</li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCustomers" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarCustomers">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:users-group-two-rounded-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Customers </span>
                              </a>
                              <div class="collapse" id="sidebarCustomers">
                                   <ul class="nav sub-navbar-nav">

                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/users">List</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                         <li class="menu-title mt-2">Other</li>

                         <li class="nav-item">
                              <a class="nav-link menu-arrow" href="#sidebarCoupons" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarCoupons">
                                   <span class="nav-icon">
                                        <iconify-icon icon="solar:leaf-bold-duotone"></iconify-icon>
                                   </span>
                                   <span class="nav-text"> Coupons </span>
                              </a>
                              <div class="collapse" id="sidebarCoupons">
                                   <ul class="nav sub-navbar-nav">
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/coupon">List</a>
                                        </li>
                                        <li class="sub-nav-item">
                                             <a class="sub-nav-link" href="/admin/addCoupon">Add</a>
                                        </li>
                                   </ul>
                              </div>
                         </li>

                     <li class="nav-item">
                         <a class="nav-link menu-arrow" href="#sidebarOffers" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="sidebarOffers">
                              <span class="nav-icon">
                                   <iconify-icon icon="solar:leaf-bold-duotone"></iconify-icon>
                              </span>
                              <span class="nav-text"> Offers </span>
                         </a>
                         <div class="collapse" id="sidebarOffers">
                              <ul class="nav sub-navbar-nav">
                                   <li class="sub-nav-item">
                                        <a class="sub-nav-link" href="/admin/offers">List</a>
                                   </li>
                                   <li class="sub-nav-item">
                                        <a class="sub-nav-link" href="/admin/addOffer">Add</a>
                                   </li>
                              </ul>
                         </div>
                    </li>
                    </ul>
               </div>
          </div>
          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->
          <div class="page-content">

               <!-- Start Container Fluid -->
               <div class="container-xxl">

                    <div class="row d-none">
                         <div class="col-lg-12">
                              <div class="card bg-light-subtle">
                                   <div class="card-header border-0">
                                        <div class="row justify-content-between">
                                             <div class="col-lg-6">
                                                  <div class="row align-items-center">
                                                       <div class="col-lg-6">
                                                            <form class="app-search d-none d-md-block me-auto">
                                                                 <div class="position-relative">
                                                                      <input type="search" class="form-control" placeholder="Search Coupons and Code" autocomplete="off" value="">
                                                                      <iconify-icon icon="solar:magnifer-broken" class="search-widget-icon"></iconify-icon>
                                                                 </div>
                                                            </form>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <h5 class="text-dark fw-medium mb-0">5,786 <span class="text-muted">Items</span></h5>
                                                       </div>
                                                  </div>
                                             </div>
                                             <div class="col-lg-6">
                                                  <div class="text-md-end mt-3 mt-md-0">
                                                       <button type="button" class="btn btn-outline-secondary me-1"><i class="bx bx-cog me-1"></i>More Setting</button>
                                                       <button type="button" class="btn btn-outline-secondary me-1"><i class="bx bx-filter-alt me-1"></i> Filters</button>
                                                       <button type="button" class="btn btn-success me-1"><i class="bx bx-plus"></i> New Coupons</button>
                                                  </div>
                                             </div><!-- end col-->
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>

                    <div class="row">
                         <div class="col-xl-12">
                              <div class="card">
                                   <div class="card-header d-flex justify-content-between align-items-center gap-1">
                                        <h4 class="card-title flex-grow-1">All Coupon List</h4>

                                        <a href="/admin/addCoupon" class="btn btn-sm btn-primary">
                                             Add Coupon
                                        </a>
                                   </div>
                                        <div class="table-responsive">
                                             <table class="table align-middle mb-0 table-hover table-centered">
                                                  <thead class="bg-light-subtle">
                                                       <tr>
                                                            <th style="width: 20px;">
                                                                 <div class="form-check">
                                                                      <input type="checkbox" class="form-check-input" id="customCheck1">
                                                                      <label class="form-check-label" for="customCheck1"></label>
                                                                 </div>
                                                            </th>
                                                            <th>Code</th>
                                                            <th>Min Cart Price</th>
                                                            <th>Discount type</th>
                                                            <th>Discount</th>
                                                            <th>Start Date</th>
                                                            <th>End Date</th>
                                                            <th>Status</th>
                                                            <th>Action</th>
                                                       </tr>
                                                  </thead>
                                                  <tbody>
                                                       <% if(coupon.length>0) { %>
                                                       <% for(let i = 0; i<coupon.length; i++) { %>
                                                       <tr>
                                                            <td>
                                                                 <div class="form-check">
                                                                      <input type="checkbox" class="form-check-input" id="customCheck2">
                                                                      <label class="form-check-label" for="customCheck2">&nbsp;</label>
                                                                 </div>
                                                            </td>
                                                            <td><%= coupon[i].code %></td>
                                                            <td><%= coupon[i].minCartValue %></td>
                                                            <td><%= coupon[i].couponType %></td>
                                                            <td><%= coupon[i].discountValue %></td>
                                                            <td class="convert-date" data-date="<%= coupon[i].startDate %>"></td>
                                                            <td class="convert-date" data-date="<%= coupon[i].endDate %>"></td>
                                                            <td>
                                                                 <% if(coupon[i].couponStatus === 'active') { %>
                                                                      <span id="activeStatus<%= i %>" class="badge text-success bg-success-subtle fs-12"><i class="bx bx-check-double"></i>Active</span>
                                                                      <span id="inactiveStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12 display-none"><i class="bx bx-x"></i>Inactive</span>
                                                                      <span id="expiredStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12 display-none"><i class="bx bx-x"></i>Expired</span>
                                                                 <% } else if(coupon[i].couponStatus === 'inactive') { %>   
                                                                      <span id="activeStatus<%= i %>" class="badge text-success bg-success-subtle fs-12 display-none"><i class="bx bx-check-double"></i>Active</span>
                                                                      <span id="inactiveStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12"><i class="bx bx-x"></i>Inactive</span>
                                                                      <span id="expiredStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12 display-none"><i class="bx bx-x"></i>Expired</span>
                                                                 <% } else if(coupon[i].couponStatus === 'expired') { %>
                                                                      <span id="activeStatus<%= i %>" class="badge text-success bg-success-subtle fs-12 display-none"><i class="bx bx-check-double"></i>Active</span>
                                                                      <span id="inactiveStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12 display-none"><i class="bx bx-x"></i>Inactive</span>
                                                                      <span id="expiredStatus<%= i %>" class="badge text-danger bg-danger-subtle fs-12"><i class="bx bx-x"></i>Expired</span>
                                                                 <% } %>     
                                                            </td>
                                                            <td>
                                                                 <% if(coupon[i].couponStatus !== 'expired') { %>
                                                                 <div class="d-flex gap-2">
                                                                 <% if(coupon[i].couponStatus === 'inactive') { %>
                                                                      <button id="activeBtn<%= i %>" class="btn btn-success" onclick="changeStatus(event, '<%= coupon[i]._id %>', 'active', '<%= i %>')" type="button">active</button>
                                                                      <button id="inactiveBtn<%= i %>" class="btn btn-danger display-none" onclick="changeStatus(event, '<%= coupon[i]._id %>', 'inactive', '<%= i %>')" type="button">inactive</button>
                                                                 <% } else if(coupon[i].couponStatus === 'active') { %>
                                                                      <button id="activeBtn<%= i %>" class="btn btn-success display-none" onclick="changeStatus(event, '<%= coupon[i]._id %>', 'active', '<%= i %>')" type="button">active</button>
                                                                      <button id="inactiveBtn<%= i %>" class="btn btn-danger" onclick="changeStatus(event, '<%= coupon[i]._id %>', 'inactive', '<%= i %>')" type="button">inactive</button>
                                                                 <% }} %>
                                                                 </div>
                                                            </td>
                                                       </tr>
                                                       <% }} %>
                                                  </tbody>
                                             </table>
                                        </div>
                                        <!-- end table-responsive -->
                                   </div>
                                   <div class="card-footer border-top">
                                        <nav aria-label="Page navigation example">
                                             <ul class="pagination justify-content-end mb-0">
                                                  <% if(currentPage > 1) { %>
                                                       <li class="page-item"><a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a></li>
                                                  <% } for(let i = 1; i<= totalPages; i++) { if(i == currentPage) { %>
                                                       <li class="page-item active"><a class="page-link"><%= i %></a></li>
                                                  <% } else { %>
                                                       <li class="page-item"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
                                                  <% }} if(currentPage < totalPages) { %>
                                                       <li class="page-item"><a class="page-link" href="?page=<%= Number(currentPage) + 1 %>">Next</a></li>
                                                  <% } %> 
                                         
                                             </ul>
                                        </nav>
                                   </div>
                              </div>
                         </div>

                    </div>

               </div>
               <!-- End Container Fluid -->

               <!-- ========== Footer Start ========== -->
               <footer class="footer">
                   <div class="container-fluid">
                       <div class="row">
                           <div class="col-12 text-center">
                               <script>document.write(new Date().getFullYear())</script> &copy; Larkon. Crafted by <iconify-icon icon="iconamoon:heart-duotone" class="fs-18 align-middle text-danger"></iconify-icon> <a
                                   href="https://1.envato.market/techzaa" class="fw-bold footer-text" target="_blank">Techzaa</a>
                           </div>
                       </div>
                   </div>
               </footer>
               <!-- ========== Footer End ========== -->

          </div>
          <!-- ==================================================== -->
          <!-- End Page Content -->
          <!-- ==================================================== -->

     </div>
     <!-- END Wrapper -->

     <!-- Vendor Javascript (Require in all Page) -->
     <script src="assets/js/vendor.js"></script>

     <!-- App Javascript (Require in all Page) -->
     <script src="assets/js/app.js"></script>
     <script>
          function covertDate(element, newDate) {
               const date = new Date(newDate);
               const convertedDate = date.getDate() +  " " + date.toLocaleString('default', { month: 'short' }) + " " + date.getFullYear();
               element.innerHTML = convertedDate;
          }
          document.addEventListener('DOMContentLoaded', () => {
               const dateElem = document.querySelectorAll('.convert-date');
               dateElem.forEach((element) => {
                    const date = element.getAttribute('data-date');
                    covertDate(element, date);
               });
          });
          
          // function for change coupon status 
          function changeStatus(event, id, value, i) {
               event.preventDefault();
               if(!id || !value) {
                    return
               }
               if(value === 'inactive') {
                    Swal.fire({
                         position: "top-end",
                         title: 'Are you sure you want to inactive this coupon?',
                         type: 'warning',
                         showCancelButton: true,
                         confirmButtonColor: '#3085d6',
                         cancelButtonColor: '#d33',
                         confirmButtonText: 'Yes',
                         cancelButtonText: 'No',
                         customClass: {
                              popup: 'short-swal-popup',
                              confirmButton: 'short-swal-confirm-btn',
                              cancelButton: 'short-swal-cancel-btn'
                         }
                    })
                    .then(result => {
                         if(result.isConfirmed) {
                              fetchFunction(id, value, i);
                         }
                    });
               } else {
                    Swal.fire({
                         position: "top-end",
                         title: 'Are you sure you want to active this coupon?',
                         type: 'warning',
                         showCancelButton: true,
                         confirmButtonColor: '#3085d6',
                         cancelButtonColor: '#d33',
                         confirmButtonText: 'Yes',
                         cancelButtonText: 'No',
                         customClass: {
                              popup: 'short-swal-popup',
                              confirmButton: 'short-swal-confirm-btn',
                              cancelButton: 'short-swal-cancel-btn'
                         }
                    })
                    .then(result => {
                         if(result.isConfirmed) {
                              fetchFunction(id, value, i);
                         }
                    })
               }
               
          }
          async function fetchFunction(id, value, i) {
               try {
                    const response = await fetch(`/admin/changeCouponStatus?id=${id}&value=${value}`, {method: 'PATCH'});
                    const data = await response.json();
                    if(!response.ok) {
                         throw new Error(data.message);
                    }
                    if(data.success) {
                         if(data.value === 'active') {
                              document.getElementById('activeBtn'+i).style.display = 'none';
                              document.getElementById('inactiveStatus'+i).style.display = 'none';
                              document.getElementById('expiredStatus'+i).style.display = 'none';
                              document.getElementById('inactiveBtn'+i).style.display = 'block';
                              document.getElementById('activeStatus'+i).style.display = 'block';
                         } else {
                              document.getElementById('inactiveBtn'+i).style.display = 'none';
                              document.getElementById('activeStatus'+i).style.display = 'none';
                              document.getElementById('expiredStatus'+i).style.display = 'none';
                              document.getElementById('activeBtn'+i).style.display = 'block';
                              document.getElementById('inactiveStatus'+i).style.display = 'block';
                         }
                    }
               } catch (error) {
                    Swal.fire({
                         position: "top-end",
                         html: `
                              <div style="display: flex; align-items: center; gap: 10px;">
                                   <div>
                                        <div class="swal2-icon swal2-error" style="width: 30px; height: 30px; margin: 0; font-size: 16px;"></div>
                                   </div>
                                   <div style="font-size: 20px; text-align: left;">Oops... ${error.message}</div>
                              </div>
                         `,
                         showConfirmButton: false,
                         timer: 1500,
                         customClass: {
                              popup: 'compact-swal-popup',
                         }
                    });
               }
          }

          async function logout() {
          try {
               const response = await fetch('/admin/logout', {method: 'POST'})
               const data = await response.json();
               if(!response.ok) {
                    throw new Error(data.message);
               }
               if(data.success) {
                    window.location.href = '/admin/login'
               }
          } catch (error) {
               Swal.fire({
                    position: "top-end",
                    icon: "error",
                    title: "Oops...",
                    text: error.message,
                    showConfirmButton: false,
                    timer: 1500,
                    customClass: {
                         popup: 'custom-swal-popup'
                    }
               });
          }
     }

     document.getElementById('logout-btn').addEventListener('click', logout);
     </script>

</body>


<!-- Mirrored from techzaa.in/larkon/admin/coupons-list.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:31 GMT -->
</html>